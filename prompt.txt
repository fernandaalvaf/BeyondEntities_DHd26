# Finaler Prompt für Konzept-, Abweichungs-, Matching- und Ähnlichkeitsanalyse

## Zweck
Extrahiere aus zwei ikonografischen Beschreibungen **vollständige semantische Konzepte**, führe ein **sauberes 1:1-Matching** durch, berechne **Ähnlichkeitswerte (0–100)** und gib **nur echte inhaltliche Abweichungen** aus.  
Die Struktur muss stabil sein, und jedes EN-Konzept darf **maximal einmal** zugeordnet werden.

---

# REGELN

## 1. Konzepte müssen vollständige semantische Einheiten sein
Ein Konzept besteht aus:  
**Subjekt + Handlung/Attribut/Position/Beziehung**  

Beispiele:  
- „Anchialos Brustbild“  
- „Anchialos nach rechts“  
- „Anchialos mit Taenia“  
- „Kapaneus Speer in der rechten Hand haltend“  
- „Eros links von Aphrodite“

NICHT erlaubt:  
- „nach rechts“  
- „mit Taenia“  
- „Speer“

---

## 2. Subjektbezug immer explizit nennen
Jedes Konzept muss klar benennen, wer etwas tut oder hält.  
Beispiel:  
statt „mit Gewand“ → „Anchialos mit Gewand“.

---

## 3. Synonyme/Äquivalenzen
Synonymliste (fortlaufend erweiterbar):

- Perlkreis = border of dots

Sobald Synonyme erkannt werden, gelten sie als **ähnlichkeitsoptimal (100)**.

---

## 4. Mehr-Objekt-Konzepte aufspalten
Wenn eine Sprache schreibt:
- „holding shield and ladder“

und die andere Sprache zwei Konzepte hat, **muss** das Mehrfachkonzept aufgeteilt werden in:

- „holding shield“  
- „holding ladder“

Damit echte 1:1-Zuordnungen entstehen.

---

## 5. Kritische Parameter
Folgende Unterschiede gelten als **immer abweichungsrelevant**, selbst bei hoher similarity:

- links/rechts  
- oben/unten  
- vorwärts/facing  
- Objekt in welcher Hand  
- Körperteil auf welchem Objekt  
- Orientierung eines Objekts (z. B. nach links unten)

---

## 6. Ähnlichkeitsbewertung
Semantisch basiert, nicht sprachlich:

- **100** = vollständig äquivalent  
- **95–99** = praktisch identisch (nur Formulierung anders)  
- **70–94** = deutlich ähnlich  
- **40–69** = teilweise ähnlich  
- **1–39** = geringe semantische Überlappung  
- **0** = keine inhaltliche Gemeinsamkeit

---

## 7. Regeln für abweichung = true/false

### abweichung = true, wenn:
- similarity < 95  
ODER  
- ein kritischer Parameter betroffen ist  

### abweichung = false, wenn:
- similarity ≥ 95  
UND  
- kein kritischer Parameter betroffen ist

---

## 8. Matching-Regeln (sehr wichtig!)

### A. **Strenges 1:1-Matching**
Jedes DE-Konzept wird einem **genau einem** EN-Konzept zugeordnet.  

### B. **Ein EN-Konzept darf nur einmal verwendet werden**
Wenn ein EN-Konzept bereits einem DE-Konzept zugeordnet ist, darf es **nicht** erneut auftauchen.

### C. **Keine künstlichen null ↔ EN-Einträge**
Ein EN-Konzept darf nur dann im Vergleich erscheinen, wenn:
- es **noch nicht zugeordnet wurde**  
- und kein DE-Konzept dafür existiert

### D. **Keine Dopplungen von Synonymen**
Wenn „Perlkreis“ ↔ „border of dots“ zugeordnet wurde, darf „border of dots“ **nirgendwo sonst** erscheinen.

---

## 9. Fehlinterpretationen vermeiden
- Keine Geschlechtsinterpretationen aus Namen  
- Keine künstlichen Zusatzkonzepte („male“, „nude“, „youthful“)  
- „low wall“ vs. „wall“ ist **keine** Abweichung, sondern nur Präzisierung

---

# AUSGABEFORMAT

```json
{
  "originaleingabe": {
    "de": "...",
    "en": "..."
  },
  "konzepte": {
    "de": [ "...", "..." ],
    "en": [ "...", "..." ]
  },
  "vergleich": [
    {
      "konzept_de": "...",
      "konzept_en": "... oder null",
      "similarity": 0-100,
      "abweichung": true/false,
      "beschreibung": "nur bei abweichung"
    }
  ],
  "meta": {
    "source_id": "",
    "languages": ["de", "en"],
    "erstelldatum": "YYYY-MM-DD",
    "ausfuehrungszeit_ms": 0
  }
}
```

---

# Hinweise
- Die ID muss immer die Original-ID bleiben.  
- Jedes Konzept muss vollständig formuliert werden.  
- Unterschiedliche Segmentierung (1 Konzept vs. 2 Konzepte) darf keine Abweichung ergeben.  
- Nach einem erfolgreichen Synonym-Match darf ein EN-Konzept nicht erneut verwendet werden.
